<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Budget App</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
</head>
<body class="bg-gray-50">
    <!-- Toast Notification -->
    <div id="toast" class="toast">
        <span id="toast-message"></span>
    </div>

    <!-- Header -->
    <header class="bg-white border-b border-gray-200 sticky top-0 z-40">
        <div class="max-w-7xl mx-auto px-4 py-4 flex justify-between items-center">
            <h1 class="text-2xl font-bold text-blue-600">Budget App</h1>
            <div class="flex gap-2">
                <button onclick="showAddTransactionModal()" class="btn-primary">+ Add Transaction</button>
                <button onclick="showAddTransferModal()" class="btn-secondary">Transfer</button>
            </div>
        </div>
    </header>

    <div class="max-w-7xl mx-auto px-4 py-6 flex gap-6">
        <!-- Sidebar Navigation -->
        <aside class="w-64 flex-shrink-0">
            <nav class="bg-white rounded-lg shadow-md p-4 sticky top-24">
                <div class="space-y-2">
                    <div class="nav-item active" data-view="budget" onclick="showView('budget')">Budget</div>
                    <div class="nav-item" data-view="accounts" onclick="showView('accounts')">Accounts</div>
                    <div class="nav-item" data-view="transactions" onclick="showView('transactions')">All Transactions</div>
                    <div class="nav-item" data-view="categories" onclick="showView('categories')">Categories</div>
                </div>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="flex-1">
            <!-- Budget View -->
            <div id="budget-view" class="view">
                <div class="card mb-6">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-2xl font-bold text-gray-800">Budget - <span id="current-month"></span></h2>
                        <div class="flex gap-2">
                            <button onclick="changeMonth(-1)" class="btn-secondary">← Previous</button>
                            <button onclick="changeMonth(1)" class="btn-secondary">Next →</button>
                        </div>
                    </div>

                    <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6">
                        <div class="text-sm text-gray-600 mb-1">Ready to Assign</div>
                        <div class="text-3xl font-bold text-blue-600" id="ready-to-assign">$0.00</div>
                        <div class="text-xs text-gray-500 mt-2">Money available to allocate to categories</div>
                    </div>

                    <div class="mb-4 flex justify-between items-center">
                        <h3 class="text-lg font-semibold text-gray-700">Categories</h3>
                        <button onclick="showView('categories')" class="btn-secondary text-sm">Manage Categories</button>
                    </div>

                    <div id="budget-categories" class="space-y-2">
                        <!-- Categories will be loaded here -->
                    </div>
                </div>
            </div>

            <!-- Accounts View -->
            <div id="accounts-view" class="view hidden">
                <div class="card">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-gray-800">Accounts</h2>
                        <button onclick="showAddAccountModal()" class="btn-primary">+ Add Account</button>
                    </div>

                    <div class="mb-6 p-4 bg-gray-50 rounded-lg">
                        <div class="text-sm text-gray-600">Total Balance</div>
                        <div class="text-2xl font-bold text-gray-800" id="total-balance">$0.00</div>
                    </div>

                    <div id="accounts-list" class="space-y-3">
                        <!-- Accounts will be loaded here -->
                    </div>
                </div>
            </div>

            <!-- Transactions View -->
            <div id="transactions-view" class="view hidden">
                <div class="card">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-gray-800">All Transactions</h2>
                        <button onclick="showAddTransactionModal()" class="btn-primary">+ Add Transaction</button>
                    </div>

                    <div id="transactions-list" class="space-y-2">
                        <!-- Transactions will be loaded here -->
                    </div>
                </div>
            </div>

            <!-- Categories View -->
            <div id="categories-view" class="view hidden">
                <div class="card">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-gray-800">Categories</h2>
                        <button onclick="showAddCategoryModal()" class="btn-primary">+ Add Category</button>
                    </div>

                    <div id="categories-list" class="space-y-2">
                        <!-- Categories will be loaded here -->
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Add Transaction Modal -->
    <div id="transaction-modal" class="modal" onclick="if(event.target === this) closeModal('transaction-modal')">
        <div class="bg-white rounded-lg p-6 max-w-md w-full mx-4">
            <h3 class="text-xl font-bold mb-4">Add Transaction</h3>
            <form id="transaction-form" class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Account *</label>
                    <select id="transaction-account" required class="w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        <option value="">Select account...</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Category <span id="category-required-indicator">*</span></label>
                    <select id="transaction-category" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        <option value="">Select category...</option>
                    </select>
                    <p class="text-xs text-gray-500 mt-1" id="category-hint">Required for expenses, optional for income</p>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Type *</label>
                    <select id="transaction-type" required class="w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        <option value="inflow">Inflow (Income)</option>
                        <option value="outflow" selected>Outflow (Expense)</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Amount *</label>
                    <input type="number" id="transaction-amount" step="0.01" min="0.01" required class="w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="0.00">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Date *</label>
                    <input type="date" id="transaction-date" required class="w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Description</label>
                    <input type="text" id="transaction-description" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Optional">
                </div>
                <div class="flex gap-2 justify-end pt-4">
                    <button type="button" onclick="closeModal('transaction-modal')" class="btn-secondary">Cancel</button>
                    <button type="submit" class="btn-primary">Add Transaction</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Transfer Modal -->
    <div id="transfer-modal" class="modal" onclick="if(event.target === this) closeModal('transfer-modal')">
        <div class="bg-white rounded-lg p-6 max-w-md w-full mx-4">
            <h3 class="text-xl font-bold mb-4">Transfer Between Accounts</h3>
            <form id="transfer-form" class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">From Account *</label>
                    <select id="transfer-from-account" required class="w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        <option value="">Select account...</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">To Account *</label>
                    <select id="transfer-to-account" required class="w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        <option value="">Select account...</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Amount *</label>
                    <input type="number" id="transfer-amount" step="0.01" min="0.01" required class="w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="0.00">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Date *</label>
                    <input type="date" id="transfer-date" required class="w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Description</label>
                    <input type="text" id="transfer-description" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Optional">
                </div>
                <div class="flex gap-2 justify-end pt-4">
                    <button type="button" onclick="closeModal('transfer-modal')" class="btn-secondary">Cancel</button>
                    <button type="submit" class="btn-primary">Create Transfer</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Account Modal -->
    <div id="account-modal" class="modal" onclick="if(event.target === this) closeModal('account-modal')">
        <div class="bg-white rounded-lg p-6 max-w-md w-full mx-4">
            <h3 class="text-xl font-bold mb-4">Add Account</h3>
            <form id="account-form" class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Account Name *</label>
                    <input type="text" id="account-name" required class="w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="e.g., Checking Account">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Type *</label>
                    <select id="account-type" required class="w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        <option value="checking">Checking</option>
                        <option value="savings">Savings</option>
                        <option value="cash">Cash</option>
                        <option value="credit">Credit Card</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Starting Balance *</label>
                    <input type="number" id="account-balance" step="0.01" value="0" required class="w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="0.00">
                </div>
                <div class="flex gap-2 justify-end pt-4">
                    <button type="button" onclick="closeModal('account-modal')" class="btn-secondary">Cancel</button>
                    <button type="submit" class="btn-primary">Add Account</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Category Modal -->
    <div id="category-modal" class="modal" onclick="if(event.target === this) closeModal('category-modal')">
        <div class="bg-white rounded-lg p-6 max-w-md w-full mx-4">
            <h3 class="text-xl font-bold mb-4">Add Category</h3>
            <form id="category-form" class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Category Name *</label>
                    <input type="text" id="category-name" required class="w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="e.g., Groceries">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Color</label>
                    <input type="color" id="category-color" value="#3b82f6" class="w-full h-10 border border-gray-300 rounded-md">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Description</label>
                    <textarea id="category-description" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent" rows="2" placeholder="Optional"></textarea>
                </div>
                <div class="flex gap-2 justify-end pt-4">
                    <button type="button" onclick="closeModal('category-modal')" class="btn-secondary">Cancel</button>
                    <button type="submit" class="btn-primary">Add Category</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Allocate Budget Modal -->
    <div id="allocation-modal" class="modal" onclick="if(event.target === this) closeModal('allocation-modal')">
        <div class="bg-white rounded-lg p-6 max-w-md w-full mx-4">
            <h3 class="text-xl font-bold mb-4">Allocate Budget</h3>
            <form id="allocation-form" class="space-y-4">
                <input type="hidden" id="allocation-category-id">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Category</label>
                    <div id="allocation-category-name" class="text-lg font-semibold text-gray-800"></div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Amount to Allocate *</label>
                    <input type="number" id="allocation-amount" step="0.01" min="0" required class="w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="0.00">
                    <p class="text-xs text-gray-500 mt-1">This will replace any existing allocation for this month</p>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Notes</label>
                    <textarea id="allocation-notes" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent" rows="2" placeholder="Optional"></textarea>
                </div>
                <div class="flex gap-2 justify-end pt-4">
                    <button type="button" onclick="closeModal('allocation-modal')" class="btn-secondary">Cancel</button>
                    <button type="submit" class="btn-primary">Allocate</button>
                </div>
            </form>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
